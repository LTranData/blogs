"use strict";(self.webpackChunkkgajera_blog=self.webpackChunkkgajera_blog||[]).push([[1741],{3905:(n,t,e)=>{e.d(t,{Zo:()=>d,kt:()=>u});var i=e(7294);function c(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function a(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function r(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a(Object(e),!0).forEach((function(t){c(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function l(n,t){if(null==n)return{};var e,i,c=function(n,t){if(null==n)return{};var e,i,c={},a=Object.keys(n);for(i=0;i<a.length;i++)e=a[i],t.indexOf(e)>=0||(c[e]=n[e]);return c}(n,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(c[e]=n[e])}return c}var h=i.createContext({}),o=function(n){var t=i.useContext(h),e=t;return n&&(e="function"==typeof n?n(t):r(r({},t),n)),e},d=function(n){var t=o(n.components);return i.createElement(h.Provider,{value:t},n.children)},s={inlineCode:"code",wrapper:function(n){var t=n.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef((function(n,t){var e=n.components,c=n.mdxType,a=n.originalType,h=n.parentName,d=l(n,["components","mdxType","originalType","parentName"]),g=o(e),u=c,m=g["".concat(h,".").concat(u)]||g[u]||s[u]||a;return e?i.createElement(m,r(r({ref:t},d),{},{components:e})):i.createElement(m,r({ref:t},d))}));function u(n,t){var e=arguments,c=t&&t.mdxType;if("string"==typeof n||c){var a=e.length,r=new Array(a);r[0]=g;var l={};for(var h in t)hasOwnProperty.call(t,h)&&(l[h]=t[h]);l.originalType=n,l.mdxType="string"==typeof n?n:c,r[1]=l;for(var o=2;o<a;o++)r[o]=e[o];return i.createElement.apply(null,r)}return i.createElement.apply(null,e)}g.displayName="MDXCreateElement"},548:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>h,contentTitle:()=>r,default:()=>s,frontMatter:()=>a,metadata:()=>l,toc:()=>o});var i=e(7462),c=(e(7294),e(3905));const a={slug:"mysql-series-mysql-indexing",title:"MySQL series - Indexing",authors:"tranlam",tags:["Bigdata","MySQL","Database","Data Engineering","Indexing"],image:"./images/indexing.PNG"},r=void 0,l={permalink:"/blogs/blog/mysql-series-mysql-indexing",editUrl:"https://github.com/lam1051999/blogs/edit/main/blog/2022-10-15-mysql-indexing/index.md",source:"@site/blog/2022-10-15-mysql-indexing/index.md",title:"MySQL series - Indexing",description:"Indexing l\xe0 ph\u01b0\u01a1ng ph\xe1p gi\xfap truy v\u1ea5n nhanh h\u01a1n, l\xe0 m\u1ed9t ph\u1ea7n r\u1ea5t quan tr\u1ecdng trong vi\u1ec7c c\u1ea3i thi\u1ec7n hi\u1ec7u n\u0103ng. \u0110\u1ed1i v\u1edbi c\xe1c b\u1ea3ng d\u1eef li\u1ec7u l\u1edbn, vi\u1ec7c \u0111\xe1nh index ch\xednh x\xe1c gi\xfap t\u0103ng t\u1ed1c \u0111\u1ed9 nhanh h\u01a1n g\u1ea5p nhi\u1ec1u l\u1ea7n, tuy nhi\xean, vi\u1ec7c n\xe0y th\u01b0\u1eddng kh\xf4ng \u0111\u01b0\u1ee3c t\xednh to\xe1n s\xe1t sao trong quy tr\xecnh thi\u1ebft k\u1ebf b\u1ea3ng. B\xe0i vi\u1ebft n\xe0y n\xf3i v\u1ec1 c\xe1c lo\u1ea1i index v\xe0 c\xe1ch \u0111\xe1nh index sao cho h\u1ee3p l\xfd.",date:"2022-10-15T00:00:00.000Z",formattedDate:"October 15, 2022",tags:[{label:"Bigdata",permalink:"/blogs/blog/tags/bigdata"},{label:"MySQL",permalink:"/blogs/blog/tags/my-sql"},{label:"Database",permalink:"/blogs/blog/tags/database"},{label:"Data Engineering",permalink:"/blogs/blog/tags/data-engineering"},{label:"Indexing",permalink:"/blogs/blog/tags/indexing"}],readingTime:12.155,truncated:!0,authors:[{name:"Tr\u1ea7n L\xe2m",title:"Data Engineer @ Giaohangtietkiem",url:"https://github.com/lam1051999",imageURL:"https://github.com/lam1051999.png",key:"tranlam"}],frontMatter:{slug:"mysql-series-mysql-indexing",title:"MySQL series - Indexing",authors:"tranlam",tags:["Bigdata","MySQL","Database","Data Engineering","Indexing"],image:"./images/indexing.PNG"},nextItem:{title:"MySQL series - Multiversion concurrency control",permalink:"/blogs/blog/mysql-series-mysql-mvcc"}},h={image:e(343).Z,authorsImageUrls:[void 0]},o=[{value:"1. C\xe1c lo\u1ea1i index",id:"1-c\xe1c-lo\u1ea1i-index",level:3},{value:"1.1. B-tree index",id:"11-b-tree-index",level:4},{value:"1.1.1. Adaptive hash index",id:"111-adaptive-hash-index",level:5},{value:"1.1.2. C\xe1c lo\u1ea1i truy v\u1ea5n c\xf3 th\u1ec3 d\xf9ng B-tree index",id:"112-c\xe1c-lo\u1ea1i-truy-v\u1ea5n-c\xf3-th\u1ec3-d\xf9ng-b-tree-index",level:5},{value:"1.1.3. M\u1ed9t s\u1ed1 nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a B-tree index",id:"113-m\u1ed9t-s\u1ed1-nh\u01b0\u1ee3c-\u0111i\u1ec3m-c\u1ee7a-b-tree-index",level:5},{value:"1.2. Full-text index",id:"12-full-text-index",level:4},{value:"1.2.1. C\xe1c lo\u1ea1i full-text index",id:"121-c\xe1c-lo\u1ea1i-full-text-index",level:5},{value:"2. L\u1ee3i \xedch vi\u1ec7c \u0111\xe1nh index",id:"2-l\u1ee3i-\xedch-vi\u1ec7c-\u0111\xe1nh-index",level:3},{value:"3. Chi\u1ebfn thu\u1eadt \u0111\xe1nh index",id:"3-chi\u1ebfn-thu\u1eadt-\u0111\xe1nh-index",level:3},{value:"3.1. Index ti\u1ec1n t\u1ed1 c\xe1c tr\u01b0\u1eddng text d\xe0i",id:"31-index-ti\u1ec1n-t\u1ed1-c\xe1c-tr\u01b0\u1eddng-text-d\xe0i",level:4},{value:"3.2. Index tr\xean nhi\u1ec1u column",id:"32-index-tr\xean-nhi\u1ec1u-column",level:4},{value:"3.3. Ch\u1ecdn \u0111\xfang th\u1ee9 t\u1ef1 c\u1ed9t \u0111\u1ec3 index",id:"33-ch\u1ecdn-\u0111\xfang-th\u1ee9-t\u1ef1-c\u1ed9t-\u0111\u1ec3-index",level:4},{value:"3.4. Clustered index",id:"34-clustered-index",level:4},{value:"3.5. Covering index",id:"35-covering-index",level:4}],d={toc:o};function s(n){let{components:t,...a}=n;return(0,c.kt)("wrapper",(0,i.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,c.kt)("p",null,"Indexing l\xe0 ph\u01b0\u01a1ng ph\xe1p gi\xfap truy v\u1ea5n nhanh h\u01a1n, l\xe0 m\u1ed9t ph\u1ea7n r\u1ea5t quan tr\u1ecdng trong vi\u1ec7c c\u1ea3i thi\u1ec7n hi\u1ec7u n\u0103ng. \u0110\u1ed1i v\u1edbi c\xe1c b\u1ea3ng d\u1eef li\u1ec7u l\u1edbn, vi\u1ec7c \u0111\xe1nh index ch\xednh x\xe1c gi\xfap t\u0103ng t\u1ed1c \u0111\u1ed9 nhanh h\u01a1n g\u1ea5p nhi\u1ec1u l\u1ea7n, tuy nhi\xean, vi\u1ec7c n\xe0y th\u01b0\u1eddng kh\xf4ng \u0111\u01b0\u1ee3c t\xednh to\xe1n s\xe1t sao trong quy tr\xecnh thi\u1ebft k\u1ebf b\u1ea3ng. B\xe0i vi\u1ebft n\xe0y n\xf3i v\u1ec1 c\xe1c lo\u1ea1i index v\xe0 c\xe1ch \u0111\xe1nh index sao cho h\u1ee3p l\xfd."),(0,c.kt)("p",null,(0,c.kt)("img",{alt:"Indexing",src:e(343).Z,width:"786",height:"668"})),(0,c.kt)("h3",{id:"1-c\xe1c-lo\u1ea1i-index"},"1. C\xe1c lo\u1ea1i index"),(0,c.kt)("p",null,"C\xf3 r\u1ea5t nhi\u1ec1u lo\u1ea1i index thi\u1ebft k\u1ebf cho nhi\u1ec1u m\u1ee5c \u0111\xedch kh\xe1c nhau. N\xean nh\u1edb r\u1eb1ng, index \u0111\u01b0\u1ee3c tri\u1ec3n khai \u1edf storage engine, kh\xf4ng ph\u1ea3i \u1edf t\u1ea7ng server, do v\u1eady, ch\xfang ho\u1ea1t \u0111\u1ed9ng kh\xe1c nhau \u1edf c\xe1c storage engine kh\xe1c nhau. C\xe1c lo\u1ea1i index \u1edf b\xe0i vi\u1ebft n\xe0y ch\u1ee7 y\u1ebfu v\u1ec1 index trong InnoDB."),(0,c.kt)("h4",{id:"11-b-tree-index"},"1.1. B-tree index"),(0,c.kt)("p",null,"B-tree index d\xf9ng c\xe2y c\xe2n b\u1eb1ng \u0111\u1ec3 l\u01b0u tr\u1eef d\u1eef li\u1ec7u c\u1ee7a n\xf3, h\u1ea7u nh\u01b0 t\u1ea5t c\u1ea3 storage engine c\u1ee7a MySQL \u0111\u1ec1u h\u1ed7 tr\u1ee3 ki\u1ec3u index n\xe0y (ho\u1eb7c l\xe0 bi\u1ebfn th\u1ec3 c\u1ee7a n\xf3), v\xed d\u1ee5, NDB Cluster storage engine s\u1eed d\u1ee5ng c\u1ea5u tr\xfac d\u1eef li\u1ec7u T-tree cho indexing, InnoDB s\u1eed d\u1ee5ng B+ tree,...\nTrong B-tree, t\u1ea5t c\u1ea3 gi\xe1 tr\u1ecb \u0111\u1ec1u \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp, v\xe0 c\xe1c l\xe1 (leaf) \u0111\u1ec1u c\xf3 kho\u1ea3ng c\xe1ch b\u1eb1ng nhau t\u1edbi g\u1ed1c (root) c\u1ee7a c\xe2y. D\u01b0\u1edbi \u0111\xe2y h\xecnh l\xe0 m\xf4 t\u1ea3 c\u1ea5u tr\xfac d\u1eef li\u1ec7u B-tree. "),(0,c.kt)("p",null,(0,c.kt)("img",{alt:"B Tree",src:e(1773).Z,width:"1306",height:"930"})),(0,c.kt)("p",null,"B-tree cung c\u1ea5p cho ta kh\u1ea3 n\u0103ng t\xecm ki\u1ebfm, truy c\u1eadp d\u1eef li\u1ec7u tu\u1ea7n t\u1ef1, ch\xe8n v\xe0 xo\xe1 v\u1edbi \u0111\u1ed9 ph\u1ee9c t\u1ea1p logarithmic ",(0,c.kt)("span",{parentName:"p",className:"math math-inline"},(0,c.kt)("span",{parentName:"span",className:"katex"},(0,c.kt)("span",{parentName:"span",className:"katex-mathml"},(0,c.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,c.kt)("semantics",{parentName:"math"},(0,c.kt)("mrow",{parentName:"semantics"},(0,c.kt)("mi",{parentName:"mrow"},"O"),(0,c.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,c.kt)("mi",{parentName:"mrow"},"l"),(0,c.kt)("mi",{parentName:"mrow"},"o"),(0,c.kt)("mi",{parentName:"mrow"},"g"),(0,c.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,c.kt)("mi",{parentName:"mrow"},"n"),(0,c.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,c.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,c.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"{O(log(n))}")))),(0,c.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,c.kt)("span",{parentName:"span",className:"base"},(0,c.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,c.kt)("span",{parentName:"span",className:"mord"},(0,c.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"O"),(0,c.kt)("span",{parentName:"span",className:"mopen"},"("),(0,c.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.01968em"}},"l"),(0,c.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,c.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"g"),(0,c.kt)("span",{parentName:"span",className:"mopen"},"("),(0,c.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,c.kt)("span",{parentName:"span",className:"mclose"},"))")))))),". \u1ede root node s\u1ebd c\xf3 con tr\u1ecf tr\u1ecf \u0111\u1ebfn c\xe1c node con, khi ta truy v\u1ea5n, storage engine s\u1ebd bi\u1ebft nh\xe1nh node con ph\xf9 h\u1ee3p \u0111\u1ec3 duy\u1ec7t b\u1eb1ng c\xe1c nh\xecn v\xe0o c\xe1c gi\xe1 tr\u1ecb trong node pages, ch\u1ee9a th\xf4ng tin ng\u01b0\u1ee1ng tr\xean v\xe0 ng\u01b0\u1ee1ng d\u01b0\u1edbi gi\xe1 tr\u1ecb c\xe1c node con trong page \u0111\xf3. \u1ede t\u1ea7ng leaf page, c\xe1c con tr\u1ecf tr\u1ecf \u0111\u1ebfn d\u1eef li\u1ec7u thay v\xec tr\u1ecf t\u1edbi c\xe1c page kh\xe1c."),(0,c.kt)("p",null,"\u1ede h\xecnh tr\xean, ch\xfang ta ch\u1ec9 nh\xecn th\u1ea5y 1 node page v\xe0 c\xe1c leaf page. Th\u1ef1c t\u1ebf B-tree c\xf3 r\u1ea5t nhi\u1ec1u t\u1ea7ng node page gi\u1eefa root node v\xe0 leaf nodes, \u0111\u1ed9 l\u1edbn c\u1ee7a c\xe2y d\u1ef1a v\xe0o \u0111\u1ed9 l\u1edbn c\u1ee7a b\u1ea3ng \u0111\u01b0\u1ee3c \u0111\xe1nh index."),(0,c.kt)("h5",{id:"111-adaptive-hash-index"},"1.1.1. Adaptive hash index"),(0,c.kt)("p",null,"Khi c\xe1c gi\xe1 tr\u1ecb index \u0111\u01b0\u1ee3c truy c\u1eadp v\u1edbi t\u1ea7n s\u1ed1 cao, InnoDB s\u1ebd d\u1ef1ng m\u1ed9t b\u1ed9 hash index cho ch\xfang \u1edf memory tr\xean n\u1ec1n c\u1ee7a B-tree index, gi\xfap ch\xfang ta c\xf3 th\u1ec3 t\xecm ki\u1ebfm gi\xe1 tr\u1ecb hash n\xe0y r\u1ea5t nhanh v\xe0 hi\u1ec7u qu\u1ea3. Ch\u1ebf \u0111\u1ed9 n\xe0y l\xe0 t\u1ef1 \u0111\u1ed9ng b\u1edfi InnoDB, tuy nhi\xean, b\u1ea1n v\u1eabn c\xf3 th\u1ec3 v\xf4 hi\u1ec7u ho\xe1 adaptive hash index n\u1ebfu mu\u1ed1n."),(0,c.kt)("h5",{id:"112-c\xe1c-lo\u1ea1i-truy-v\u1ea5n-c\xf3-th\u1ec3-d\xf9ng-b-tree-index"},"1.1.2. C\xe1c lo\u1ea1i truy v\u1ea5n c\xf3 th\u1ec3 d\xf9ng B-tree index"),(0,c.kt)("p",null,"B-tree index ho\u1ea1t \u0111\u1ed9ng hi\u1ec7u qu\u1ea3 v\u1edbi c\xe1c lo\u1ea1i truy v\u1ea5n ch\xednh x\xe1c gi\xe1 tr\u1ecb, m\u1ed9t kho\u1ea3ng gi\xe1 tr\u1ecb, hay m\u1ed9t ti\u1ec1n t\u1ed1 gi\xe1 tr\u1ecb. C\xe1c truy v\u1ea5n n\xe0y l\xe0 t\u1ed1t nh\u1ea5t khi ch\xfang ta d\xf9ng ch\xfang tr\xean c\u1ed9t tr\xe1i nh\u1ea5t trong t\u1eadp c\u1ed9t \u0111\u01b0\u1ee3c \u0111\xe1nh index."),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE People (\n     last_name varchar(50) not null,\n     first_name varchar(50) not null,\n     dob date not null,\n     KEY `idx_full_col` (last_name, first_name, dob)\n) ENGINE=InnoDB;\n")),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"Kh\u1edbp ch\xednh x\xe1c gi\xe1 tr\u1ecb: khi c\xe1c c\u1ed9t trong index \u0111\u01b0\u1ee3c query kh\u1edbp \u0111\xfang gi\xe1 tr\u1ecb n\xe0o \u0111\xf3, v\xed d\u1ee5 ",(0,c.kt)("inlineCode",{parentName:"li"},"WHERE last_name = 'lam' AND first_name = 'tran' AND dob = '1999-05-10'"),". Truy v\u1ea5n lo\u1ea1i n\xe0y s\u1ebd tr\u1ea3 v\u1ec1 k\u1ebft qu\u1ea3 r\u1ea5t nhanh."),(0,c.kt)("li",{parentName:"ul"},"Kh\u1edbp c\u1ed9t tr\xe1i nh\u1ea5t: V\xed d\u1ee5 n\u1ebfu ta truy v\u1ea5n t\xecm ng\u01b0\u1eddi c\xf3 ",(0,c.kt)("inlineCode",{parentName:"li"},"last_name = 'lam'"),"."),(0,c.kt)("li",{parentName:"ul"},"Kh\u1edbp ph\u1ea7n \u0111\u1ea7u c\u1ee7a c\u1ed9t tr\xe1i nh\u1ea5t: V\xed d\u1ee5 khi ta t\xecm ng\u01b0\u1eddi c\xf3 last_name b\u1eaft \u0111\u1ea7u b\u1eb1ng ch\u1eef 'L'."),(0,c.kt)("li",{parentName:"ul"},"Kh\u1edbp m\u1ed9t kho\u1ea3ng gi\xe1 tr\u1ecb: Khi ta c\u1ea7n l\u1ea5y t\u1eadp ng\u01b0\u1eddi c\xf3 last_name \u1edf gi\u1eefa 'anh' v\xe0 'lam'."),(0,c.kt)("li",{parentName:"ul"},"Kh\u1edbp c\u1ed9t tr\xe1i nh\u1ea5t v\xe0 m\u1ed9t kho\u1ea3ng gi\xe1 tr\u1ecb c\u1ed9t ti\u1ebfp theo: V\xed d\u1ee5 khi ta c\u1ea7n th\xf4ng tin nh\u1eefng ng\u01b0\u1eddi last_name l\xe0 'lam' v\xe0 first_name b\u1eaft \u0111\u1ea7u b\u1eb1ng ch\u1ee9 't'.")),(0,c.kt)("h5",{id:"113-m\u1ed9t-s\u1ed1-nh\u01b0\u1ee3c-\u0111i\u1ec3m-c\u1ee7a-b-tree-index"},"1.1.3. M\u1ed9t s\u1ed1 nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a B-tree index"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"N\xf3 s\u1ebd kh\xf4ng th\u1ef1c s\u1ef1 c\xf3 \xedch khi \u0111i\u1ec1u ki\u1ec7n truy v\u1ea5n kh\xf4ng b\u1eaft \u0111\u1ea7u b\u1eb1ng c\u1ed9t tr\xe1i nh\u1ea5t, c\u0169ng nh\u01b0 kh\xf4ng t\u1ed1t khi truy v\u1ea5n t\xecm nh\u1eefng ng\u01b0\u1eddi c\xf3 last_name k\u1ebft th\xfac b\u1eb1ng ch\u1eef c\u1ee5 th\u1ec3."),(0,c.kt)("li",{parentName:"ul"},"C\xe1c truy v\u1ea5n b\u1ecf qu\xe3ng m\u1ed9t s\u1ed1 c\u1ed9t c\u0169ng kh\xf4ng t\u1eadn d\u1ee5ng h\u1ebft \u0111\u01b0\u1ee3c l\u1ee3i \xedch index. V\xed d\u1ee5 khi t\xecm nh\u1eefng ng\u01b0\u1eddi c\xf3 ",(0,c.kt)("inlineCode",{parentName:"li"},"last_name = 'lam' AND dob = '1999-05-10'")," m\xe0 kh\xf4ng c\xf3 \u0111i\u1ec1u ki\u1ec7n tr\xean first_name."),(0,c.kt)("li",{parentName:"ul"},"Index ki\u1ec3u n\xe0y s\u1ebd kh\xf4ng t\u1eadn d\u1ee5ng ph\u1ea7n c\xe1c c\u1ed9t \u0111\u1eb1ng sau c\u1ed9t kh\u1edbp kho\u1ea3ng gi\xe1 tr\u1ecb. V\xed d\u1ee5, truy v\u1ea5n ng\u01b0\u1eddi ",(0,c.kt)("inlineCode",{parentName:"li"},"last_name = 'lam' AND first_name LIKE 't%' AND dob = '1999-05-10'")," s\u1ebd ch\u1ec9 \xe1p d\u1ee5ng index tr\xean 2 c\u1ed9t last_name v\xe0 first_name. V\u1edbi nh\u1eefng c\u1ed9t \xedt d\u1eef li\u1ec7u ph\xe2n bi\u1ec7t, ta c\xf3 th\u1ec3 overcome c\xe1i n\xe0y b\u1eb1ng vi\u1ec7c li\u1ec7t k\xea t\u1ea5t c\u1ea3 gi\xe1 tr\u1ecb thay v\xec truy c\u1eadp kho\u1ea3ng gi\xe1 tr\u1ecb.")),(0,c.kt)("p",null,"Nh\u01b0 v\u1eady, th\u1ee9 t\u1ef1 c\u1ee7a c\xe1c c\u1ed9t trong index th\u1ef1c s\u1ef1 r\u1ea5t quan tr\u1ecdng, b\u1ea1n c\u1ea7n xem x\xe9t m\u1ee5c ti\xeau truy v\u1ea5n c\u1ee7a \u1ee9ng d\u1ee5ng tr\u01b0\u1edbc khi \u0111\xe1nh index cho c\xe1c c\u1ed9t."),(0,c.kt)("h4",{id:"12-full-text-index"},"1.2. Full-text index"),(0,c.kt)("p",null,"Full-text index t\xecm ki\u1ebfm c\xe1c t\u1eeb kho\xe1 trong chu\u1ed7i ch\u1eef thay v\xec so s\xe1nh tr\u1ef1c ti\u1ebfp c\u1ea3 gi\xe1 tr\u1ecb c\u1ee7a tr\u01b0\u1eddng \u0111\xf3. N\xf3 h\u1ed7 tr\u1ee3 cho vi\u1ec7c t\xecm ki\u1ebfm h\u01a1n l\xe0 vi\u1ec7c suy x\xe9t d\u1eef li\u1ec7u kh\u1edbp v\u1edbi ki\u1ec3u n\xe0o. Khi m\u1ed9t c\u1ed9t \u0111\u01b0\u1ee3c \u0111\xe1nh full-text index, ta v\u1eabn c\xf3 th\u1ec3 \u0111\xe1nh B-tree index tr\xean c\u1ed9t \u0111\xf3 \u0111\u01b0\u1ee3c."),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE tutorial (\n    id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY, \n    title VARCHAR(200), \n    description TEXT, \n    FULLTEXT `idx_full_text` (title,description)\n) ENGINE=InnoDB;\n")),(0,c.kt)("p",null,"Full-text index \u0111\u01b0\u1ee3c d\xf9ng b\u1eb1ng c\xfa ph\xe1p ",(0,c.kt)("inlineCode",{parentName:"p"},"MATCH() AGAINST()")," v\u1edbi tham s\u1ed1 c\u1ee7a ",(0,c.kt)("inlineCode",{parentName:"p"},"MATCH()")," l\xe0 c\xe1c c\u1ed9t \u0111\u1ec3 t\xecm ki\u1ebfm, c\xe1ch nhau b\u1eb1ng d\u1ea5u ph\u1ea3y, tham s\u1ed1 c\u1ee7a ",(0,c.kt)("inlineCode",{parentName:"p"},"AGAINST()")," l\xe0 chu\u1ed7i \u0111\u1ec3 t\xecm ki\u1ebfm c\xf9ng lo\u1ea1i t\xecm ki\u1ebfm \u0111\u1ec3 th\u1ef1c hi\u1ec7n."),(0,c.kt)("h5",{id:"121-c\xe1c-lo\u1ea1i-full-text-index"},"1.2.1. C\xe1c lo\u1ea1i full-text index"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"Natural language search: ch\u1ebf \u0111\u1ed9 n\xe0y s\u1ebd di\u1ec5n gi\u1ea3i chu\u1ed7i ch\u1eef t\xecm ki\u1ebfm d\u01b0\u1edbi d\u1ea1ng m\u1ed9t c\u1ee5m t\u1eeb trong ng\xf4n ng\u1eef t\u1ef1 nhi\xean c\u1ee7a con ng\u01b0\u1eddi. Ch\u1ebf \u0111\u1ed9 n\xe0y kh\xf4ng t\xednh c\xe1c stopwords c\u0169ng nh\u01b0 c\xe1c t\u1eeb ng\u1eafn h\u01a1n s\u1ed1 k\xed t\u1ef1 t\u1ed1i thi\u1ebfu (m\u1eb7c \u0111\u1ecbnh l\xe0 3 k\xed t\u1ef1 v\u1edbi InnoDB)"),(0,c.kt)("li",{parentName:"ul"},"Boolean search: di\u1ec5n gi\u1ea3i chu\u1ed7i ch\u1eef t\xecm ki\u1ebfm s\u1eed d\u1ee5ng quy t\u1eafc ng\xf4n ng\u1eef truy v\u1ea5n \u0111\u1eb7c bi\u1ec7t. Chu\u1ed7i ch\u1ee9 \u0111\xf3 ch\u1ee9a t\u1ea5t c\u1ea3 c\xe1c t\u1eeb c\u1ea7n t\xecm ki\u1ebfm, n\xf3 c\u0169ng c\xf3 th\u1ec3 ch\u1ee9a c\xe1c operator \u0111\u1eb7c bi\u1ec7t cho c\xe1c t\xecm ki\u1ebfm n\xe2ng cao, nh\u01b0 m\u1ed9t t\u1eeb c\u1ea7n ph\u1ea3i \u0111\u01b0\u1ee3c xu\u1ea5t hi\u1ec7n trong chu\u1ed7i, hay t\u1eeb \u0111\u01b0\u1ee3c \u0111\xe1nh tr\u1ecdng s\u1ed1 n\u1eb7ng h\u01a1n hay nh\u1eb9 h\u01a1n. C\xe1c stop words s\u1ebd b\u1ecb b\u1ecf qua trong ch\u1ebf \u0111\u1ed9 n\xe0y."),(0,c.kt)("li",{parentName:"ul"},"Query expansion: l\xe0 m\u1ed9t bi\u1ebfn th\u1ec3 c\u1ee7a natural language search. C\xe1c t\u1eeb trong c\xe1c rows li\xean quan nh\u1ea5t \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 s\u1ebd \u0111\u01b0\u1ee3c th\xeam v\xe0o chu\u1ed7i ch\u1eef t\xecm ki\u1ebfm, v\xe0 vi\u1ec7c t\xecm ki\u1ebfm s\u1ebd \u0111\u01b0\u1ee3c l\u1eb7p l\u1ea1i. Truy v\u1ea5n s\u1ebd tr\u1ea3 v\u1ec1 c\xe1c rows trong l\u1ea7n t\xecm ki\u1ebfm th\u1ee9 hai.")),(0,c.kt)("p",null,"M\xecnh s\u1ebd kh\xf4ng \u0111i v\xe0o chi ti\u1ebft t\u1eebng lo\u1ea1i, v\xec m\xecnh c\u0169ng \xedt khi d\xf9ng full-text index."),(0,c.kt)("h3",{id:"2-l\u1ee3i-\xedch-vi\u1ec7c-\u0111\xe1nh-index"},"2. L\u1ee3i \xedch vi\u1ec7c \u0111\xe1nh index"),(0,c.kt)("p",null,"M\u1ed9t s\u1ed1 l\u1ee3i \xedch c\u1ee7a vi\u1ec7c \u0111\xe1nh index"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"Index gi\xfap server ti\u1ebft ki\u1ec7m th\u1eddi gian \u0111\u1ec3 duy\u1ec7t v\xe0 truy v\u1ea5n."),(0,c.kt)("li",{parentName:"ul"},"Index gi\xfap server tr\xe1nh \u0111\u01b0\u1ee3c c\xe1c ho\u1ea1t \u0111\u1ed9ng nh\u01b0 s\u1eafp x\u1ebfp d\u1eef li\u1ec7u hay t\u1ea1o c\xe1c b\u1ea3ng t\u1ea1m."),(0,c.kt)("li",{parentName:"ul"},"Index bi\u1ebfn vi\u1ec7c truy c\u1eadp \u1ed5 \u0111\u0129a m\u1ed9t c\xe1ch ng\u1eabu nhi\xean th\xe0nh truy c\u1eadp tu\u1ea7n t\u1ef1, c\u1ea3i thi\u1ec7n t\u1ed1c \u0111\u1ed9 \u0111\u1ecdc\nM\u1ed9t s\u1ed1 ti\xeau ch\xed \u0111\xe1nh gi\xe1 index"),(0,c.kt)("li",{parentName:"ul"},"Index c\u1ea7n ph\u1ea3i x\u1ebfp \u0111\u01b0\u1ee3c c\xe1c h\xe0ng li\xean quan t\u1edbi nhau, g\u1ea7n nhau h\u01a1n."),(0,c.kt)("li",{parentName:"ul"},"C\xe1c h\xe0ng \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp c\u1ea7n \u0111\xfang v\u1edbi nhu c\u1ea7u c\xe1c truy v\u1eabn \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n c\u1ea7n."),(0,c.kt)("li",{parentName:"ul"},"Index c\u1ea7n ph\u1ea3i ch\u1ee9a t\u1ea5t c\u1ea3 c\xe1c c\u1ed9t m\xe0 truy v\u1ea5n \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n l\u1ecdc.")),(0,c.kt)("h3",{id:"3-chi\u1ebfn-thu\u1eadt-\u0111\xe1nh-index"},"3. Chi\u1ebfn thu\u1eadt \u0111\xe1nh index"),(0,c.kt)("p",null,"Vi\u1ec7c t\u1ea1o \u0111\xfang c\xe1c index s\u1ebd c\u1ea3i thi\u1ec7n t\u1ed1c \u0111\u1ed9 truy v\u1ea5n c\u1ee7a b\u1ea1n r\u1ea5t nhi\u1ec1u, t\u1eeb \u0111\xf3 gi\xfap cho \u1ee9ng d\u1ee5ng c\u1ee7a b\u1ea1n ph\u1ea3n h\u1ed3i nhanh h\u01a1n t\u1edbi ng\u01b0\u1eddi d\xf9ng."),(0,c.kt)("h4",{id:"31-index-ti\u1ec1n-t\u1ed1-c\xe1c-tr\u01b0\u1eddng-text-d\xe0i"},"3.1. Index ti\u1ec1n t\u1ed1 c\xe1c tr\u01b0\u1eddng text d\xe0i"),(0,c.kt)("p",null,"G\u1ecdi index selectivity l\xe0 ch\u1ec9 s\u1ed1 gi\u1eefa s\u1ed1 gi\xe1 tr\u1ecb kh\xe1c nhau c\u1ee7a c\u1ed9t / t\u1ed5ng b\u1ea3n ghi c\u1ee7a b\u1ea3ng. V\u1edbi c\xe1c c\u1ed9t c\xf3 index selectivity cao, th\xec vi\u1ec7c \u0111\xe1nh index tr\xean c\xe1c tr\u01b0\u1eddng n\xe0y r\u1ea5t hi\u1ec7u qu\u1ea3 b\u1edfi v\xec MySQL s\u1ebd lo\u1ea1i b\u1ecf \u0111\u01b0\u1ee3c nhi\u1ec1u b\u1ea3n ghi h\u01a1n khi l\u1ecdc tr\xean c\xe1c c\u1ed9t \u1ea5y.\nV\u1edbi c\xe1c tr\u01b0\u1eddng text d\xe0i, ta kh\xf4ng th\u1ec3 \u0111\xe1nh index tr\xean c\u1ea3 \u0111\u1ed9 d\xe0i c\u1ed9t v\xec MySQL s\u1ebd kh\xf4ng cho ph\xe9p \u0111i\u1ec1u \u0111\xf3, do v\u1eady ta c\u1ea7n t\xecm m\u1ed9t l\u01b0\u1ee3ng prefix \u0111\u1ee7 t\u1ed1t c\u1ee7a tr\u01b0\u1eddng \u0111\xf3 \u0111\u1ec3 \u0111\xe1nh index v\xe0 n\xf3 s\u1ebd cho ta m\u1ed9t performance \u0111\u1ee7 t\u1ed1t."),(0,c.kt)("p",null,"Th\u1eed v\u1edbi d\u1eef li\u1ec7u v\u1ec1 s\u1ea3n ph\u1ea9m d\u01b0\u1edbi \u0111\xe2y, ta li\u1ec7t k\xea m\u01b0\u1eddi nh\xe0 b\xe1n c\xf3 xu\u1ea5t hi\u1ec7n nhi\u1ec1u nh\u1ea5t"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"select productVendor, count(1) c from `classicmodels`.`products_index`\ngroup by productVendor\norder by c desc\nLIMIT 10;\n\n+--------------------------------------------------+----+\n| productVendor                                    | c  |\n+--------------------------------------------------+----+\n| Pressure and Safety Relief Valve                 | 10 |\n| NEC United Solutions                             |  9 |\n| SunGard Data Systems                             |  8 |\n| Zhengzhou Esunny Information Technology Co.,Ltd. |  8 |\n| Spring Support                                   |  8 |\n| Ball and Plug Valve                              |  7 |\n| LSAW Pipe                                        |  7 |\n| Wood Mackenzie Ltd                               |  7 |\n| Heat Recovery Steam Generator                    |  7 |\n| Carbon Steel Flange                              |  7 |\n+--------------------------------------------------+----+\n")),(0,c.kt)("p",null,"Th\u1eed t\xednh to\xe1n t\u1ea7n s\u1ed1 xu\u1ea5t hi\u1ec7n c\u1ee7a prefix v\u1edbi \u0111\u1ed9 d\xe0i l\xe0 3 c\u1ee7a tr\u01b0\u1eddng ",(0,c.kt)("inlineCode",{parentName:"p"},"productVendor")),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"select LEFT(productVendor, 3), count(1) c from `classicmodels`.`products_index`\ngroup by LEFT(productVendor, 3)\norder by c desc\nLIMIT 10;\n\n+------------------------+----+\n| LEFT(productVendor, 3) | c  |\n+------------------------+----+\n| Sha                    | 44 |\n| Car                    | 16 |\n| Sun                    | 15 |\n| Zhe                    | 13 |\n| Gas                    | 12 |\n| Sto                    | 11 |\n| Pre                    | 11 |\n| Col                    | 11 |\n| She                    |  9 |\n| Hea                    |  9 |\n+------------------------+----+\n")),(0,c.kt)("p",null,"Ta th\u1ea5y r\u1eb1ng t\u1ea7n s\u1ed1 xu\u1ea5t hi\u1ec7n c\u1ee7a c\xe1c gi\xe1 tr\u1ecb prefix \u0111\u1ed9 d\xe0i 3 nhi\u1ec1u h\u01a1n v\u1edbi c\u1ea3 gi\xe1 tr\u1ecb c\u1ed9t nhi\u1ec1u, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng v\u1edbi vi\u1ec7c \xedt gi\xe1 tr\u1ecb kh\xe1c nhau h\u01a1n, t\u01b0\u01a1ng \u0111\u01b0\u01a1ng v\u1edbi index selectivity s\u1ebd b\xe9 h\u01a1n nhi\u1ec1u. Do v\u1eady prefix 3 kh\xf4ng ph\u1ea3i l\xe0 l\u1ef1a ch\u1ecdn t\u1ed1t"),(0,c.kt)("p",null,"Ta c\xf9ng t\xednh to\xe1n index selectivity v\u1edbi nhi\u1ec1u lo\u1ea1i \u0111\u1ed9 d\xe0i prefix"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"select COUNT(DISTINCT LEFT(productVendor, 3))/COUNT(1) AS selectivity_3,\nCOUNT(DISTINCT LEFT(productVendor, 4))/COUNT(1) AS selectivity_4,\nCOUNT(DISTINCT LEFT(productVendor, 5))/COUNT(1) AS selectivity_5,\nCOUNT(DISTINCT LEFT(productVendor, 6))/COUNT(1) AS selectivity_6,\nCOUNT(DISTINCT LEFT(productVendor, 7))/COUNT(1) AS selectivity_7,\nCOUNT(DISTINCT LEFT(productVendor, 8))/COUNT(1) AS selectivity_8,\nCOUNT(DISTINCT LEFT(productVendor, 9))/COUNT(1) AS selectivity_9,\nCOUNT(DISTINCT LEFT(productVendor, 10))/COUNT(1) AS selectivity_10,\nCOUNT(DISTINCT LEFT(productVendor, 11))/COUNT(1) AS selectivity_11,\nCOUNT(DISTINCT productVendor)/COUNT(1) AS selectivity\nfrom `classicmodels`.`products_index`;\n\n+---------------+---------------+---------------+---------------+---------------+---------------+---------------+----------------+----------------+-------------+\n| selectivity_3 | selectivity_4 | selectivity_5 | selectivity_6 | selectivity_7 | selectivity_8 | selectivity_9 | selectivity_10 | selectivity_11 | selectivity |\n+---------------+---------------+---------------+---------------+---------------+---------------+---------------+----------------+----------------+-------------+\n|        0.1982 |        0.2164 |        0.2218 |        0.2236 |        0.2236 |        0.2273 |        0.2309 |         0.2491 |         0.2509 |      0.2600 |\n+---------------+---------------+---------------+---------------+---------------+---------------+---------------+----------------+----------------+-------------+\n")),(0,c.kt)("p",null,"Ta th\u1ea5y r\u1eb1ng selectivity prefix 11 r\u1ea5t g\u1ea7n v\u1edbi gi\xe1 tr\u1ecb selectivity c\u1ea3 c\u1ed9t, v\xe0 c\u0169ng kh\xe1 ph\xf9 h\u1ee3p v\u1edbi tr\u01b0\u1eddng text d\xe0i nh\u01b0 c\u1ed9t n\xe0y, n\xean ch\u1ecdn prefix 11 s\u1ebd c\xe2n b\u1eb1ng \u0111\u01b0\u1ee3c v\u1ec1 \u0111\u1ed9 l\u1edbn c\u1ee7a index c\u0169ng nh\u01b0 \u0111\u1ed9 nhanh khi truy v\u1ea5n."),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE `classicmodels`.`products_index` ADD KEY (productVendor(11));\n")),(0,c.kt)("h4",{id:"32-index-tr\xean-nhi\u1ec1u-column"},"3.2. Index tr\xean nhi\u1ec1u column"),(0,c.kt)("p",null,"M\u1ed9t s\u1ed1 sai l\u1ea7m khi \u0111\xe1nh index \u0111\xf3 l\xe0 \u0111\xe1nh index t\u1eebng c\u1ed9t m\u1ed9t c\xe1ch ri\xeang r\u1ebd, v\xe0 t\u1ea1o index cho t\u1ea5t c\u1ea3 c\xe1c c\u1ed9t \u1edf trong c\xe2u l\u1ec7nh WHERE."),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE t (\n     c1 INT,\n     c2 INT,\n     c3 INT,\n     KEY(c1),\n     KEY(c2),\n     KEY(c3)\n);\n")),(0,c.kt)("p",null,"C\xe1c index ri\xeang r\u1ebd nh\u01b0 tr\xean th\u01b0\u1eddng s\u1ebd kh\xf4ng t\u1ed1i \u01b0u hi\u1ec7u n\u0103ng nhi\u1ec1u l\u1eafm trong h\u1ea7u h\u1ebft c\xe1c ho\xe0n c\u1ea3nh, b\u1edfi v\xec khi n\xe0y MySQL c\xf3 th\u1ec3 s\u1eed d\u1ee5ng m\u1ed9t chi\u1ebfn thu\u1eadt g\u1ecdi l\xe0 index merge. Index merge s\u1ebd s\u1eed d\u1ee5ng t\u1ea5t c\u1ea3 index trong c\xe2u truy v\u1ea5n, qu\xe9t c\xe1c index m\u1ed9t c\xe1ch \u0111\u1ed3ng th\u1eddi, sau \u0111\xf3 s\u1ebd merge k\u1ebft qu\u1ea3 l\u1ea1i"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"union index s\u1ebd d\xf9ng cho \u0111i\u1ec1u ki\u1ec7n OR"),(0,c.kt)("li",{parentName:"ul"},"intersection index s\u1ebd d\xf9ng cho \u0111i\u1ec1u ki\u1ec7n AND"),(0,c.kt)("li",{parentName:"ul"},"union of intersection index cho s\u1ef1 k\u1ebft h\u1ee3p c\u1ee7a c\u1ea3 2")),(0,c.kt)("p",null,"D\u01b0\u1edbi \u0111\xe2y l\xe0 v\xed d\u1ee5 query tr\xean 2 tr\u01b0\u1eddng index nh\u01b0ng MySQL s\u1eed d\u1ee5ng index merge"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> explain select * from `classicmodels`.`products_index` where productVendor = 'Infor Global Solutions' OR productScale = '1:10'\\G\n*************************** 1. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: products_index\n   partitions: NULL\n         type: index_merge\npossible_keys: productVendor,productScale\n          key: productVendor,productScale\n      key_len: 14,12\n          ref: NULL\n         rows: 33\n     filtered: 100.00\n        Extra: Using sort_union(productVendor,productScale); Using where\n")),(0,c.kt)("p",null,"M\u1ed9t s\u1ed1 c\xe2n nh\u1eafc khi query g\u1eb7p index merge"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"N\u1ebfu server intersect index (\u0111i\u1ec1u ki\u1ec7n AND tr\xean c\xe1c index), \u0111i\u1ec1u \u0111\xf3 c\xf3 ngh\u0129a l\xe0 b\u1ea1n c\xf3 th\u1ec3 t\u1ea1o 1 index ch\u1ee9a t\u1ea5t c\u1ea3 c\xe1c c\u1ed9t li\xean quan t\u1edbi nhau, kh\xf4ng ph\u1ea3i t\u1eebng index cho t\u1eebng c\u1ed9t."),(0,c.kt)("li",{parentName:"ul"},"N\u1ebfu server union index (\u0111i\u1ec1u ki\u1ec7n OR tr\xean c\xe1c index), ki\u1ec3m tra xem c\xe1c c\u1ed9t \u1ea5y c\xf3 index selectivity c\xf3 cao kh\xf4ng, n\u1ebfu index selectivity trong m\u1ed9t s\u1ed1 c\u1ed9t th\u1ea5p, ngh\u0129a l\xe0 c\u1ed9t \u1ea5y \xedt gi\xe1 tr\u1ecb kh\xe1c nhau, ngh\u0129a l\xe0 ph\u1ea7n scan index tr\u1ea3 v\u1ec1 nhi\u1ec1u b\u1ea3n ghi h\u01a1n cho c\xe1c ho\u1ea1t \u0111\u1ed9ng merge ti\u1ebfp sau n\xf3, ti\xeau t\u1ed1n nhi\u1ec1u CPU v\xe0 b\u1ed9 nh\u1edb h\u01a1n. \u0110\xf4i khi, vi\u1ebft l\u1ea1i truy v\u1ea5n v\u1edbi l\u1ec7nh UNION c\xf2n cho k\u1ebft qu\u1ea3 kh\u1ea3 quan h\u01a1n l\xe0 khi server union c\xe1c index trong index merge.")),(0,c.kt)("p",null,"Khi ta nh\xecn th\u1ea5y index merge trong c\xe2u l\u1ec7nh EXPLAIN, h\xe3y xem l\u1ea1i query v\xe0 c\u1ea5u tr\xfac b\u1ea3ng \u0111\u1ec3 ki\u1ec3m tra xem hi\u1ec7n t\u1ea1i thi\u1ebft k\u1ebf \u0111\xe3 l\xe0 t\u1ed1i \u01b0u nh\u1ea5t hay ch\u01b0a."),(0,c.kt)("h4",{id:"33-ch\u1ecdn-\u0111\xfang-th\u1ee9-t\u1ef1-c\u1ed9t-\u0111\u1ec3-index"},"3.3. Ch\u1ecdn \u0111\xfang th\u1ee9 t\u1ef1 c\u1ed9t \u0111\u1ec3 index"),(0,c.kt)("p",null,"Khi m\u1ed9t index c\u1ee7a ta ch\u01b0a nhi\u1ec1u c\u1ed9t, th\u1ee9 t\u1ef1 c\xe1c c\u1ed9t trong index \u0111\xf3 r\u1ea5t quan tr\u1ecdng, v\xec trong B-tree index, index s\u1ebd \u0111\u01b0\u1ee3c s\u1eafp x\u1ebfp t\u1eeb c\u1ed9t tr\xe1i nh\u1ea5t \u0111\u1ebfn c\xe1c c\u1ed9t ti\u1ebfp theo \u0111\xf3 (m\u1ed9t s\u1ed1 nh\u01b0\u1ee3c \u0111i\u1ec3m c\u1ee7a B-tree index ",(0,c.kt)("strong",{parentName:"p"},(0,c.kt)("a",{parentName:"strong",href:"#113-m%E1%BB%99t-s%E1%BB%91-nh%C6%B0%E1%BB%A3c-%C4%91i%E1%BB%83m-c%E1%BB%A7a-b-tree-index"}," t\u1ea1i \u0111\xe2y")),"). Do v\u1eady, ta th\u01b0\u1eddng ch\u1ecdn c\xe1c c\u1ed9t c\xf3 index selectivity cao l\xe0m c\u1ed9t tr\xe1i nh\u1ea5t, th\u1ee9 t\u1ef1 c\xe1c c\u1ed9t theo \u0111\u1ed9 gi\u1ea3m d\u1ea7n c\u1ee7a index selectivity, \u0111\u1ec3 t\u1ed5ng th\u1ec3 index c\u1ee7a ta c\xf3 selectivity cao."),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"select count(distinct productVendor)/count(1),\n    count(distinct productScale)/count(1)\nfrom `classicmodels`.`products_index`;\n\n+----------------------------------------+---------------------------------------+\n| count(distinct productVendor)/count(1) | count(distinct productScale)/count(1) |\n+----------------------------------------+---------------------------------------+\n|                                 0.2600 |                                0.0145 |\n+----------------------------------------+---------------------------------------+\n")),(0,c.kt)("p",null,"V\xed d\u1ee5 tr\xean, n\u1ebfu ta \u0111\xe1nh index g\u1ed3m 2 c\u1ed9t ",(0,c.kt)("inlineCode",{parentName:"p"},"productVendor")," v\xe0 ",(0,c.kt)("inlineCode",{parentName:"p"},"productScale"),", ta th\u01b0\u1eddng s\u1ebd l\u1ea5y ",(0,c.kt)("inlineCode",{parentName:"p"},"productVendor")," l\xe0m c\u1ed9t tr\xe1i nh\u1ea5t"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-sql"},"alter table `classicmodels`.`products_index` add key (productVendor, productScale);\n")),(0,c.kt)("h4",{id:"34-clustered-index"},"3.4. Clustered index"),(0,c.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,c.kt)("div",{parentName:"div",className:"admonition-heading"},(0,c.kt)("h5",{parentName:"div"},(0,c.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,c.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,c.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,c.kt)("div",{parentName:"div",className:"admonition-content"},(0,c.kt)("p",{parentName:"div"},"Coming soon"))),(0,c.kt)("h4",{id:"35-covering-index"},"3.5. Covering index"),(0,c.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,c.kt)("div",{parentName:"div",className:"admonition-heading"},(0,c.kt)("h5",{parentName:"div"},(0,c.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,c.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,c.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,c.kt)("div",{parentName:"div",className:"admonition-content"},(0,c.kt)("p",{parentName:"div"},"Coming soon"))),(0,c.kt)("p",null,"test protected"))}s.isMDXComponent=!0},1773:(n,t,e)=>{e.d(t,{Z:()=>i});const i=e.p+"assets/images/BTree-54fbc71e9768b5e3aa1c78fd9cdb3bb7.PNG"},343:(n,t,e)=>{e.d(t,{Z:()=>i});const i=e.p+"assets/images/indexing-3225361f58a7e378996efe9e7464a3c1.PNG"}}]);